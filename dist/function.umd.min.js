/*!
 * YCL public function Library by @YCL with MIT License
 * Built: 2026-02-22
 */
!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports):"function"==typeof define&&define.amd?define(["exports"],o):o((e="undefined"!=typeof globalThis?globalThis:e||self).__YCL_GLOBAL_EXPORTS__={})}(this,function(e){"use strict";const o=(()=>{const e="__APP_RUNTIME_DEBUG__",{hostname:o,search:r}=window.location,t=new URLSearchParams(r),n=/^(localhost|127\.0\.0\.1|::1|192\.168\.|172\.(1[6-9]|2[0-9]|3[0-1])\.|10\.)/i.test(o),s=t.get("debug"),a=["1","true","dev","admin"].includes(s),i="false"===s||"0"===s||t.has("debug")&&!a;let c=!1;if(a){c=!0;try{sessionStorage.setItem(e,"1")}catch(e){}}else if(i){c=!1;try{sessionStorage.removeItem(e)}catch(e){}}else c=n||"1"===sessionStorage.getItem(e);return()=>c})(),r=(()=>{if(navigator.userAgentData&&void 0!==navigator.userAgentData.mobile){const e=navigator.userAgentData.mobile;return()=>e}const e=window.matchMedia&&window.matchMedia("(pointer: coarse)").matches,o="MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,r=navigator.userAgent||navigator.vendor||window.opera||"",t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(r),n=e||o||t;return()=>n})();class t{static#e=new Map;static openDatabase(e,o){if(!("indexedDB"in window))return Promise.reject(new Error("IndexedDB is not supported in this environment."));if(this.#e.has(e))return this.#e.get(e);const r=new Promise((r,t)=>{const n=indexedDB.open(e,1);n.onupgradeneeded=e=>{const r=e.target.result;r.objectStoreNames.contains(o)||r.createObjectStore(o)},n.onsuccess=o=>{const t=o.target.result;t.onclose=()=>this.#e.delete(e),r(t)},n.onerror=o=>{this.#e.delete(e),t(new Error(`IndexedDB open error: ${o.target.error.name}`))}});return this.#e.set(e,r),r}static#o(e,o,r,t){return new Promise((n,s)=>{const a=e.transaction([o],r),i=a.objectStore(o),c=t(i);a.oncomplete=()=>n(c.result),a.onerror=e=>s(new Error(`Transaction error: ${e.target.error.name}`)),c.onerror=e=>s(new Error(`Request error: ${e.target.error.name}`))})}static async saveToIndexedDB(e,o,r,t){const n=await this.openDatabase(e,o);await this.#o(n,o,"readwrite",e=>e.put(t,r))}static async getFromIndexedDB(e,o,r){const t=await this.openDatabase(e,o);return this.#o(t,o,"readonly",e=>e.get(r))}}"undefined"!=typeof console&&console.log("\n+---------------------------------------------------------+\n\n         %co     o          %co o o          %co\n           %co o           %co               %co\n            %co           %co                %co\n            %co            %co               %co\n            %co             %co o o          %co o o o%c    \n     \n+--------------------------------------------------------+\n\n我们一日日度过的所谓的日常，实际上可能是接连不断的奇迹！--京阿尼《日常》","color:#ff0","color:#0f0","color:#0ff","color:#ff0","color:#0f0","color:#0ff","color:#ff0","color:#0f0","color:#0ff","color:#ff0","color:#0f0","color:#0ff","color:#ff0","color:#0f0","color:#0ff","color:#fff"),e.DbgTimmer=class{#r=!1;#t=new Map;constructor(e=!1){this.#r=e}setEnable(e=!1){this.#r=e,this.#r||this.#t.clear()}Start(e="noname"){this.#r&&this.#t.set(e,performance.now())}Stop(e="noname",o=""){if(!this.#r)return;const r=this.#t.get(e);if(!r)return;const t=performance.now()-r;return"undefined"!=typeof console&&console.log(`${o||e}: %c${t}ms`,"color: #6495ed"),this.#t.delete(e),t}},e.IndexedDBControl=t,e.RandomString=function(e=32){const o=new Array(e);for(let r=0;r<e;r++)o[r]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return o.join("")},e.ServerChoose=async function(e,o=!1){if(!Array.isArray(e)||0===e.length)return o&&console.warn("TestURLs 数组为空或无效。"),[];const r=await Promise.all(e.map(async(e,o)=>{const r=new AbortController,t=performance.now();let n;const s=new Promise((e,o)=>{n=setTimeout(()=>{r.abort(),o(new Error("Timeout after 3000ms"))},3e3)});try{const a=`${e.endsWith("/")?e:e+"/"}test.bin`,i=fetch(a,{signal:r.signal}),c=await Promise.race([i,s]);if(clearTimeout(n),!c.ok)throw new Error(`HTTP Error: ${c.status} ${c.statusText||""}`);return await c.arrayBuffer(),{url:e,elapsedTime:performance.now()-t,isError:!1,error:null,index:o}}catch(r){return clearTimeout(n),{url:e,elapsedTime:performance.now()-t,isError:!0,error:r.message||r.toString(),index:o}}})),t=r.filter(e=>!e.isError),n=t.length>0?Math.min(...t.map(e=>e.elapsedTime)):1/0,s=r.map(e=>({url:e.url,elapsedTime:Number(e.elapsedTime.toFixed(2)),isError:e.isError,errorMessage:e.error,isFastest:!e.isError&&e.elapsedTime===n}));return o&&s.forEach(e=>{const o=e.isFastest?"#00ff7f":e.elapsedTime<1e3?"#ffff00":"#ffffff",r=e.isError?"#ff4500":"#32cd32";console.log(`%c[${e.isFastest?"FASTEST":"NORMAL"}] %cURL: ${e.url} | %c耗时: ${e.elapsedTime}ms | %c出错: ${e.isError}`,"font-weight: bold; color: "+(e.isFastest?"#00ff7f":"#1e90ff"),"color: #ffffff",`color: ${o}; font-weight: bold;`,`color: ${r}; font-weight: bold;`),e.isError&&console.log(`%c错误信息: ${e.errorMessage}`,"color:red")}),s},e.getUrlParams=function(e){const o=window.location.search,r=new URLSearchParams(o);if(e){const o=r.get(e);return null===o?void 0:o}{const e={};for(const[o,t]of r.entries())e[o]=t;return e}},e.isDebug=o,e.isMobile=r,e.loadExternalResource=function(e,o,r=!1,t=!1){return"undefined"!=typeof document&&document.head?new Promise((n,s)=>{let a;switch(o){case"css":a=document.createElement("link"),a.rel="stylesheet",a.href=e;break;case"js":a=document.createElement("script"),a.src=e,a.async=t,r&&(a.type="module");break;default:return s(new Error(`loadExternalResource: Invalid type "${o}".`))}a.onload=n,a.onerror=()=>s(new Error(`Failed to load resource: ${e}`)),document.head.appendChild(a)}):Promise.reject(new Error("loadExternalResource: Must be executed in DOM environment."))}}),function(e,o){var r=e[o];if(r){for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t]);try{delete e[o]}catch(r){e[o]=void 0}}}("undefined"!=typeof self?self:"undefined"!=typeof window?window:global,"__YCL_GLOBAL_EXPORTS__");
